(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{4701:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return t(2859)}])},3225:function(e,r,t){"use strict";t.d(r,{GQ:function(){return i},zM:function(){return d},qd:function(){return h}});var n=t(4051),s=t.n(n),c=t(5587);function a(e,r,t,n,s,c,a){try{var o=e[c](a),u=o.value}catch(i){return void t(i)}o.done?r(u):Promise.resolve(u).then(n,s)}function o(e){return function(){var r=this,t=arguments;return new Promise((function(n,s){var c=e.apply(r,t);function o(e){a(c,n,s,o,u,"next",e)}function u(e){a(c,n,s,o,u,"throw",e)}o(void 0)}))}}var u="http://localhost:1337";function i(e,r){return l.apply(this,arguments)}function l(){return(l=o(s().mark((function e(r,t){var n,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(u,"/addresses"),a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},e.next=5,(0,c.S)(n,a,t);case 5:return o=e.sent,e.abrupt("return",o||null);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function d(e,r){return p.apply(this,arguments)}function p(){return(p=o(s().mark((function e(r,t){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(u,"/addresses?users_permissions_user=").concat(r),e.next=4,(0,c.S)(n,null,t);case 4:return a=e.sent,e.abrupt("return",a||null);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function h(e,r){return f.apply(this,arguments)}function f(){return(f=o(s().mark((function e(r,t){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(u,"/addresses/").concat(r),a={method:"DELETE",headers:{"Content-Type":"application/json"}},e.next=5,(0,c.S)(n,a,t);case 5:if(500!==e.sent.statusCode){e.next=8;break}throw"Error en el servidor";case 8:return e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}},1761:function(e,r,t){"use strict";t.d(r,{Qp:function(){return u},Ip:function(){return l},s9:function(){return p},kh:function(){return f},_w:function(){return v}});var n=t(4051),s=t.n(n);function c(e,r,t,n,s,c,a){try{var o=e[c](a),u=o.value}catch(i){return void t(i)}o.done?r(u):Promise.resolve(u).then(n,s)}function a(e){return function(){var r=this,t=arguments;return new Promise((function(n,s){var a=e.apply(r,t);function o(e){c(a,n,s,o,u,"next",e)}function u(e){c(a,n,s,o,u,"throw",e)}o(void 0)}))}}var o="http://localhost:1337";function u(e){return i.apply(this,arguments)}function i(){return(i=a(s().mark((function e(r){var t,n,c,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="_limit=".concat(r),"_sort=createdAt:desc",n="".concat(o,"/games?").concat(t,"&").concat("_sort=createdAt:desc"),e.next=6,fetch(n);case 6:return c=e.sent,e.next=9,c.json();case 9:return a=e.sent,e.abrupt("return",a);case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function l(e,r,t){return d.apply(this,arguments)}function d(){return(d=a(s().mark((function e(r,t,n){var c,a,u,i,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c="_limit=".concat(t),"_sort=createdAt:desc",a="_start=".concat(n),u="".concat(o,"/games?platfom.platfom=").concat(r,"&").concat(c,"&").concat("_sort=createdAt:desc","&").concat(a),e.next=7,fetch(u);case 7:return i=e.sent,e.next=10,i.json();case 10:return l=e.sent,e.abrupt("return",l);case 14:return e.prev=14,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=a(s().mark((function e(r){var t,n,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(o,"/games/count?platfom.platfom=").concat(r),e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function f(e){return x.apply(this,arguments)}function x(){return(x=a(s().mark((function e(r){var t,n,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(o,"/games?url=").concat(r),e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c[0]);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function v(e){return m.apply(this,arguments)}function m(){return(m=a(s().mark((function e(r){var t,n,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(o,"/games?_q=").concat(r),e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}},2859:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return R}});var n=t(4051),s=t.n(n),c=t(5893),a=t(7294),o=t(9962),u=t(1761),i=t(7559),l=t(967),d=t(5927),p=t(5150),h=t(7257),f=t(6486);function x(e){var r=e.productos,t=e.reloadCart,n=e.setReloadCart,s=(0,a.useState)(0),o=s[0],u=s[1],x=(0,i.Z)().removeProductCart;(0,a.useEffect)((function(){var e=0;(0,f.forEach)(r,(function(r){e+=r.price})),u(e)}),[t,r]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{children:(0,c.jsx)("div",{className:"px-2 pt-2",children:(0,c.jsxs)("div",{children:[(0,c.jsx)(l.Z,{color:"black",children:"Resumen del Carrito"}),(0,c.jsx)("div",{className:"bg-white px-8 py-8 ",children:(0,c.jsxs)(d.Z,{className:"",celled:!0,structured:!0,children:[(0,c.jsx)(d.Z.Header,{children:(0,c.jsxs)(d.Z.Row,{children:[(0,c.jsx)(d.Z.HeaderCell,{children:(0,c.jsx)("p",{className:"text-center",children:"Producto"})}),(0,c.jsx)(d.Z.HeaderCell,{children:(0,c.jsx)("p",{className:"text-center",children:"Plataforma"})}),(0,c.jsx)(d.Z.HeaderCell,{children:(0,c.jsx)("p",{className:"text-center",children:"Entrega"})}),(0,c.jsx)(d.Z.HeaderCell,{children:(0,c.jsx)("p",{className:"text-center",children:"Precio"})})]})}),(0,c.jsxs)(d.Z.Body,{children:[(0,f.map)(r,(function(e){return(0,c.jsxs)(d.Z.Row,{children:[(0,c.jsx)(d.Z.Cell,{children:(0,c.jsxs)("div",{className:"flex flex-row",children:[(0,c.jsx)("div",{className:"grid content-center",children:(0,c.jsx)(p.Z,{name:"close",link:!0,onClick:function(){return r=e.url,x(r),void n(!0);var r}})}),(0,c.jsx)("div",{children:(0,c.jsx)(h.Z,{src:e.poster.url,alt:e.title,className:"h-36 ml-4"})}),(0,c.jsx)("div",{className:"grid content-center ml-4",children:(0,c.jsx)("p",{children:e.title})})]})}),(0,c.jsx)(d.Z.Cell,{children:(0,c.jsx)("p",{className:"text-center",children:e.platfom.nombre})}),(0,c.jsx)(d.Z.Cell,{children:(0,c.jsx)("p",{className:"text-center",children:"Inmediata"})}),(0,c.jsx)(d.Z.Cell,{children:(0,c.jsxs)("p",{className:"text-center",children:["$",e.price]})})]},e._id)})),(0,c.jsxs)(d.Z.Row,{children:[(0,c.jsx)(d.Z.Cell,{className:"clear"}),(0,c.jsx)(d.Z.Cell,{colSpan:"2",children:"Total:"}),(0,c.jsx)(d.Z.Cell,{children:(0,c.jsxs)("p",{className:"text-center text-2xl text-[#ff5200] font-bold",children:["$",o.toFixed(2)]})})]})]})]})})]})})})})}var v=t(1664),m=t(5985),j=t(3225),b=t(5775);function y(e,r,t,n,s,c,a){try{var o=e[c](a),u=o.value}catch(i){return void t(i)}o.done?r(u):Promise.resolve(u).then(n,s)}function w(e){var r=e.setAddressUser,t=(0,a.useState)(null),n=t[0],o=t[1],u=(0,a.useState)(null),i=u[0],d=u[1],p=(0,m.Z)(),h=p.logout,x=p.auth;return(0,a.useEffect)((function(){var e;(e=s().mark((function e(){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.zM)(x.idUser||x.isUser,h);case 2:r=e.sent,d(r||[]);case 4:case"end":return e.stop()}}),e)})),function(){var r=this,t=arguments;return new Promise((function(n,s){var c=e.apply(r,t);function a(e){y(c,n,s,a,o,"next",e)}function o(e){y(c,n,s,a,o,"throw",e)}a(void 0)}))})()}),[]),(0,c.jsx)("div",{children:(0,c.jsx)("div",{className:"px-2 pt-2",children:(0,c.jsxs)("div",{children:[(0,c.jsx)(l.Z,{color:"black",children:"Direcciones"}),(0,c.jsx)("div",{className:"bg-white px-8 py-8 ",children:0===(0,f.size)(i)?(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("h3",{className:"text-center",children:["No hay Direcciones.",(0,c.jsx)(v.default,{href:"/account",children:(0,c.jsxs)("a",{className:"text-lg",children:[" ","Crea tu primera direccion"]})})]})}):(0,c.jsx)(b.Z,{children:(0,f.map)(i,(function(e){return(0,c.jsx)(b.Z.Column,{mobile:16,tablet:8,computer:4,children:(0,c.jsx)(g,{a:e,setAddressUser:r,addressActive:n,setAddressActive:o})},e.id)}))})})]})})})}function g(e){var r=e.a,t=e.setAddressUser,n=e.addressActive,s=e.setAddressActive;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:n===r._id?"border p-2 rounded-lg ml-4 font-medium border-red-400 bg-red-300":"border border-gray-400 p-2 rounded-lg ml-4 font-medium ",onClick:function(){s(r._id),t(r)},children:[(0,c.jsx)("p",{className:"border-b border-gray-400 mt-2 text-xl font-bold",children:r.title}),(0,c.jsx)("p",{className:"-mt-2 mb-0 ",children:r.name}),(0,c.jsx)("p",{className:"my-1 ",children:r.address}),(0,c.jsxs)("p",{className:"my-1",children:[r.city,", ",r.state,", ",r.postalCode]}),(0,c.jsx)("p",{className:"my-1",children:r.phone})]})})}var k=t(6664),N=t(4465),C=t(1163),Z=t(8742),_=t(2132);function A(e,r,t,n,s,c,a){try{var o=e[c](a),u=o.value}catch(i){return void t(i)}o.done?r(u):Promise.resolve(u).then(n,s)}function P(e){var r=e.productos,t=e.addressUser,n=(0,m.Z)(),o=n.auth,u=n.logout,d=(0,i.Z)().removeAllProductsCart,p=(0,C.useRouter)(),h=(0,a.useState)(!1),x=h[0],v=h[1],j=(0,k.useStripe)(),b=(0,k.useElements)(),y=function(){var e,n=(e=s().mark((function e(n){var c,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),v(!0),j&&b){e.next=4;break}return e.abrupt("return");case 4:return c=b.getElement(k.CardElement),e.next=7,j.createToken(c);case 7:if(!(a=e.sent).error){e.next=12;break}_.Am.error(a.error.message),e.next=16;break;case 12:return e.next=14,(0,Z._G)(a.token,r,o.idUser||o.idUser,t,u);case 14:i=e.sent,(0,f.size)(i)>0?(_.Am.success("Pago realizado correctamente"),d(),p.push("/ordes")):_.Am.error("Error al realizar el pago");case 16:v(!1);case 17:case"end":return e.stop()}}),e)})),function(){var r=this,t=arguments;return new Promise((function(n,s){var c=e.apply(r,t);function a(e){A(c,n,s,a,o,"next",e)}function o(e){A(c,n,s,a,o,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}();return(0,c.jsxs)("form",{className:"",onSubmit:y,children:[(0,c.jsx)(k.CardElement,{}),(0,c.jsx)(l.Z,{type:"submit",loading:x,children:"Pagar"})]})}var E=(0,N.J)("pk_test_51KnYeQBZytezFteHwQaCQw2FVpIkWbVWQsMoadRM5bLnQDuVwVsA8A3uJt4rWdfrY1JnAb3ryqakRkMAITc2NvIT00x7XV7e9d");function S(e){var r=e.productos,t=e.addressUser;return(0,c.jsx)("div",{children:(0,c.jsx)("div",{className:"px-2 pt-2",children:(0,c.jsxs)("div",{children:[(0,c.jsx)(l.Z,{color:"black",children:"Pago"}),(0,c.jsx)("div",{className:"bg-white px-8 py-8 ",children:(0,c.jsx)(k.Elements,{stripe:E,children:(0,c.jsx)(P,{productos:r,addressUser:t})})})]})})})}function U(e){var r;if("function"===typeof Symbol){if(Symbol.asyncIterator&&null!=(r=e[Symbol.asyncIterator]))return r.call(e);if(Symbol.iterator&&null!=(r=e[Symbol.iterator]))return r.call(e)}throw new TypeError("Object is not async iterable")}function T(e,r,t,n,s,c,a){try{var o=e[c](a),u=o.value}catch(i){return void t(i)}o.done?r(u):Promise.resolve(u).then(n,s)}function R(){var e=(0,(0,i.Z)().getProductsCart)();return e?(0,c.jsx)(z,{products:e}):(0,c.jsx)(F,{})}function F(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(o.Z,{children:(0,c.jsx)("h3",{className:"text-center pt-8 text-5xl",children:"Carrito Vacio"})})})}function z(e){var r=e.products,t=(0,a.useState)(null),n=t[0],i=t[1],l=(0,a.useState)(!1),d=l[0],p=l[1],h=(0,a.useState)(null),f=h[0],v=h[1];return(0,a.useEffect)((function(){var e;(e=s().mark((function e(){var t,n,c,a,o,l,d,h,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=!1,c=!1,e.prev=2,o=U(r);case 4:return e.next=6,o.next();case 6:if(!(n=!(l=e.sent).done)){e.next=16;break}return d=l.value,h=d,e.next=11,(0,u.kh)(h);case 11:f=e.sent,t.push(f);case 13:n=!1,e.next=4;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),c=!0,a=e.t0;case 22:if(e.prev=22,e.prev=23,!n||null==o.return){e.next=27;break}return e.next=27,a.return();case 27:if(e.prev=27,!c){e.next=30;break}throw a;case 30:return e.finish(27);case 31:return e.finish(22);case 32:i(t),p(!1);case 34:case"end":return e.stop()}}),e,null,[[2,18,22,32],[23,,27,31]])})),function(){var r=this,t=arguments;return new Promise((function(n,s){var c=e.apply(r,t);function a(e){T(c,n,s,a,o,"next",e)}function o(e){T(c,n,s,a,o,"throw",e)}a(void 0)}))})()}),[d]),(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(o.Z,{children:[(0,c.jsx)(x,{productos:n,reloadCart:d,setReloadCart:p}),(0,c.jsx)(w,{setAddressUser:v}),f&&(0,c.jsx)(S,{addressUser:f,productos:n})]})})}}},function(e){e.O(0,[166,595,962,774,888,179],(function(){return r=4701,e(e.s=r);var r}));var r=e.O();_N_E=r}]);